<div xmlns:th="http://www.thymeleaf.org">

    <th:block th:fragment="productCard(product)">
        <div th:if="${product != null}"
             class="bg-white h-100 rounded-3xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 hover:scale-105 w-72 flex flex-col overflow-hidden">

            <div class="w-full aspect-[4/3] bg-green-50 flex items-center justify-center overflow-hidden">
                <div th:if="${product.image != null}">
                    <img th:src="@{'/' + ${uploadDir} + '/medium/' + ${product.image}}"
                         th:alt="${product.name} + ' image'"
                         class="w-full h-40 object-cover"/>
                </div>
            </div>

            <div class="p-4 flex flex-col flex-1 justify-between">
                <div class="flex flex-col items-center flex-1">
                    <h2 class="text-lg font-semibold text-gray-800 line-clamp-1 text-center mb-1"
                        th:text="${product.name} ?: 'Без назви'">
                        Назва товару
                    </h2>

                    <span th:text="${product.categoryName} ?: '—'"
                          class="text-xs font-medium text-green-700 bg-green-100 px-3 py-1 rounded-full mb-2">
                        Категорія
                    </span>

                    <p class="text-gray-500 text-sm text-center mb-4 line-clamp-1 overflow-hidden"
                       th:text="${product.description} ?: 'Опис відсутній'">
                        Опис товару
                    </p>
                    <p class="text-gray-500 text-sm text-center mb-4 line-clamp-1 overflow-hidden"
                       th:text="${product.price} ?: 'Греби усе'">
                        Ціна
                    </p>
                </div>

                <div class="flex gap-2 mt-2">
                    <a th:href="@{/products/{slug}(slug=${product.slug})}"
                       class="flex-1 text-center py-2 rounded-lg bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold hover:from-green-600 hover:to-green-700 transition">
                        Деталі
                    </a>

                    <button type="button"
                            class="flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-gradient-to-r from-yellow-400 to-yellow-500 text-white font-semibold hover:from-yellow-500 hover:to-yellow-600 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 7h14l-2-7M9 21a1 1 0 100-2 1 1 0 000 2zm6 0a1 1 0 100-2 1 1 0 000 2z"/>
                        </svg>
                        В кошик
                    </button>
                </div>
            </div>
        </div>

        <div th:if="${product == null}" class="bg-red-50 rounded-2xl p-5 w-72 border border-red-200">
            <p class="text-red-600 font-medium text-center">Помилка: товар = null</p>
        </div>

    </th:block>

</div>
